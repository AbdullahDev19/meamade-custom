import Tabs from "@theme/Tabs"
import TabItem from "@theme/TabItem"
import { Table } from "docs-ui"

# User Module

The User Module is the `@medusajs/user` NPM package that provides user-related features in your Medusa and Node.js applications.

---

## Features

### User Management

Manage and store your users through Create, Read, Update, and Delete (CRUD) operations:

```ts
const user = await userModuleService.create({
  email: "user@example.com",
  first_name: "John",
  last_name: "Smith",
})
```

### Invite Users

Invite users to join your store and manage those invites, with expiry and revalidation features.

```ts
const invite = await userModuleService.createInvites({
  email: "user2@example.com",
})

// refresh token later
await userModuleService.refreshInviteTokens([invite.id])
```

---

## Configure User Module

After installing the `@medusajs/user` package in your Medusa application, add it to the `modules` object in `medusa-config.js`:

```js
const modules = {
  // ...
  user: {
    resolve: "@medusajs/user",
    options: {
      jwt_secret: process.env.JWT_SECRET,
    },
  },
}
```

### Module Options

<Table>
  <Table.Header>
    <Table.Row>
      <Table.HeaderCell>Option</Table.HeaderCell>
      <Table.HeaderCell>Description</Table.HeaderCell>
      <Table.HeaderCell>Required</Table.HeaderCell>
    </Table.Row>
  </Table.Header>
  <Table.Body>
    <Table.Row>
      <Table.Cell>
      
      `jwt_secret`
      
      </Table.Cell>
      <Table.Cell>
      
      A string indicating the secret used to sign the invite tokens.
      
      </Table.Cell>
      <Table.Cell>
      
      Yes
      
      </Table.Cell>
    </Table.Row>
  </Table.Body>
</Table>

---

## How to Use User Module's Service

You can use the User Module's main service by resolving from the dependency container the resource `ModuleRegistrationName.USER` imported from `@medusajs/modules-sdk`.

For example:

<Tabs groupId="resource-type" isCodeTabs={true}>
  <TabItem label="API Route" value="api-route" attributes={{
    title: "src/api/store/custom/route.ts"
  }}>

  ```ts
  import { MedusaRequest, MedusaResponse } from "@medusajs/medusa"
  import { IUserModuleService } from "@medusajs/types"
  import { ModuleRegistrationName } from "@medusajs/modules-sdk"

  export async function GET(
    req: MedusaRequest,
    res: MedusaResponse
  ): Promise<void> {
    const userModuleService: IUserModuleService =
      req.scope.resolve(ModuleRegistrationName.USER)

    res.json({
      users: await userModuleService.list(),
    })
  }
  ```

  </TabItem>
  <TabItem label="Subscriber" value="subscribers" attributes={{
    title: "src/subscribers/custom-handler.ts"
  }}>

  ```ts
  import { SubscriberArgs } from "@medusajs/medusa"
  import { IUserModuleService } from "@medusajs/types"
  import { ModuleRegistrationName } from "@medusajs/modules-sdk"

  export default async function subscriberHandler({
    container,
  }: SubscriberArgs) {
    const userModuleService: IUserModuleService =
      container.resolve(ModuleRegistrationName.USER)

    const users = await userModuleService.list()
  }
  ```

  </TabItem>
  <TabItem label="Workflow Step" value="workflow-step" attributes={{
    title: "src/workflows/hello-world/step1.ts"
  }}>

  ```ts
  import { createStep } from "@medusajs/workflows-sdk"
  import { IUserModuleService } from "@medusajs/types"
  import { ModuleRegistrationName } from "@medusajs/modules-sdk"

  const step1 = createStep("step-1", async (_, context) => {
    const userModuleService: IUserModuleService =
      context.container.resolve(
        ModuleRegistrationName.USER
      )
    const users = await userModuleService.list()
  })
  ```

  </TabItem>
</Tabs>
