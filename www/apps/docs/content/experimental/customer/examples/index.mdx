import Tabs from "@theme/Tabs"
import TabItem from "@theme/TabItem"

# Examples of the Customer Module

In this guide, youâ€™ll find common examples of how you can use the Customer Module in your application.

## Create a Customer

<Tabs groupId="app-type" isCodeTabs={true}>
  <TabItem label="Medusa API Router" value="medusa">

  ```ts
  import { MedusaRequest, MedusaResponse } from "@medusajs/medusa"
  import { ICustomerModuleService } from "@medusajs/types"
  import { ModuleRegistrationName } from "@medusajs/modules-sdk"

  export async function POST(
    request: MedusaRequest,
    response: MedusaResponse
  ) {
    const customerModuleService: ICustomerModuleService =
      request.scope.resolve(ModuleRegistrationName.CUSTOMER)

    const customer = await customerModuleService.create({
      first_name: "Peter",
      last_name: "Hayes",
      email: "peter.hayes@example.com",
    })

    response.json({
      customer,
    })
  }
  ```

  </TabItem>
  <TabItem label="Next.js App Router" value="nextjs">

  ```ts
  import { NextResponse } from "next/server"

  import {
    initialize as initializeCustomerModule,
  } from "@medusajs/customer"

  export async function POST(request: Request) {
    const customerModuleService = await initializeCustomerModule()

    const customer = await customerModuleService.create({
      first_name: "Peter",
      last_name: "Hayes",
      email: "peter.hayes@example.com",
    })

    return NextResponse.json({
      customer,
    })
  }
  ```

  </TabItem>
</Tabs>

---

## Create a Customer Group

<Tabs groupId="app-type" isCodeTabs={true}>
  <TabItem label="Medusa API Router" value="medusa">

  ```ts
  import { MedusaRequest, MedusaResponse } from "@medusajs/medusa"
  import { ICustomerModuleService } from "@medusajs/types"
  import { ModuleRegistrationName } from "@medusajs/modules-sdk"

  export async function POST(
    request: MedusaRequest,
    response: MedusaResponse
  ) {
    const customerModuleService: ICustomerModuleService =
      request.scope.resolve(ModuleRegistrationName.CUSTOMER)

    const customerGroup =
      await customerModuleService.createCustomerGroup({
        name: "VIP",
      })

    response.json({
      customer_group: customerGroup,
    })
  }
  ```

  </TabItem>
  <TabItem label="Next.js App Router" value="nextjs">

  ```ts
  import { NextResponse } from "next/server"

  import {
    initialize as initializeCustomerModule,
  } from "@medusajs/customer"

  export async function POST(request: Request) {
    const customerModuleService = await initializeCustomerModule()

    const customerGroup =
      await customerModuleService.createCustomerGroup({
        name: "VIP",
      })

    return NextResponse.json({
      customer_group: customerGroup,
    })
  }
  ```

  </TabItem>
</Tabs>

---

## Add a Customer to a Group

<Tabs groupId="app-type" isCodeTabs={true}>
  <TabItem label="Medusa API Router" value="medusa">

  ```ts
  import { MedusaRequest, MedusaResponse } from "@medusajs/medusa"
  import { ICustomerModuleService } from "@medusajs/types"
  import { ModuleRegistrationName } from "@medusajs/modules-sdk"

  export async function POST(
    request: MedusaRequest,
    response: MedusaResponse
  ) {
    const customerModuleService: ICustomerModuleService =
      request.scope.resolve(ModuleRegistrationName.CUSTOMER)

    await customerModuleService.addCustomerToGroup({
      customer_id: "cus_123",
      customer_group_id: "cusgroup_123",
    })

    response.status(200)
  }
  ```

  </TabItem>
  <TabItem label="Next.js App Router" value="nextjs">

  ```ts
  import { NextResponse } from "next/server"

  import {
    initialize as initializeCustomerModule,
  } from "@medusajs/customer"

  export async function POST(request: Request) {
    const customerModuleService = await initializeCustomerModule()

    await customerModuleService.addCustomerToGroup({
      customer_id: "cus_123",
      customer_group_id: "cusgroup_123",
    })

    return NextResponse.json({}, { status: 200 })
  }
  ```

  </TabItem>
</Tabs>

---

## Remove a Customer from a Group

<Tabs groupId="app-type" isCodeTabs={true}>
  <TabItem label="Medusa API Router" value="medusa">

  ```ts
  import { MedusaRequest, MedusaResponse } from "@medusajs/medusa"
  import { ICustomerModuleService } from "@medusajs/types"
  import { ModuleRegistrationName } from "@medusajs/modules-sdk"

  export async function POST(
    request: MedusaRequest,
    response: MedusaResponse
  ) {
    const customerModuleService: ICustomerModuleService =
      request.scope.resolve(ModuleRegistrationName.CUSTOMER)

    await customerModuleService.removeCustomerFromGroup({
      customer_id: "cus_123",
      customer_group_id: "cusgroup_123",
    })

    response.status(200)
  }
  ```

  </TabItem>
  <TabItem label="Next.js App Router" value="nextjs">

  ```ts
  import { NextResponse } from "next/server"

  // eslint-disable-next-line prettier/prettier
  import {
    initialize as initializeCustomerModule,
  } from "@medusajs/customer"

  export async function POST(request: Request) {
    const customerModuleService = await initializeCustomerModule()

    await customerModuleService.removeCustomerFromGroup({
      customer_id: "cus_123",
      customer_group_id: "cusgroup_123",
    })

    return NextResponse.json({}, { status: 200 })
  }
  ```

  </TabItem>
</Tabs>

---

## More Examples

The [module interface reference](../../../references/customer/interfaces/customer.ICustomerModuleService.mdx) provides a reference to all the methods available for use with examples for each.
